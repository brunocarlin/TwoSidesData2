<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.1.0">
  <meta name="generator" content="Hugo 0.63.1" />

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Bruno Carlin">

  
  
  
    
  
  <meta name="description" content="Basics exploratory Data Analysis: Part 2 of 4">

  
  <link rel="alternate" hreflang="en-us" href="/2020/01/25/exploratory-data-analysis-basics-part2/">

  


  

  

  

  

  

  

  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" crossorigin="anonymous">
      
    

    

    

  

  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700|Roboto:400,400italic,700|Roboto+Mono">
  

  <link rel="stylesheet" href="/styles.css">
  

  
  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-136744370-1', 'auto');
      
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  
  

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="TwoSidesData">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="TwoSidesData">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/2020/01/25/exploratory-data-analysis-basics-part2/">

  
  
  
  
    
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="TwoSidesData">
  <meta property="og:url" content="/2020/01/25/exploratory-data-analysis-basics-part2/">
  <meta property="og:title" content="exploratory data analysis: basics Python part 2 | TwoSidesData">
  <meta property="og:description" content="Basics exploratory Data Analysis: Part 2 of 4"><meta property="og:image" content="/2020/01/25/exploratory-data-analysis-basics-part2/featured.png">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2020-01-25T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2020-01-25T00:00:00&#43;00:00">
  

  

  

  <title>exploratory data analysis: basics Python part 2 | TwoSidesData</title>

</head>
<body id="top" data-spy="scroll" data-target="#TableOfContents" data-offset="71" >
  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" role="textbox" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">TwoSidesData</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav mr-auto">
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/files/cv_en.pdf">
            
            <span>CV English</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/files/cv_pt.pdf">
            
            <span>CV Portuguese</span>
            
          </a>
        </li>

        
        

      
      </ul>
      <ul class="navbar-nav ml-auto">
      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  













<div class="article-header d-xl-none">
  <div class="featured-image" style="background-image: url('/2020/01/25/exploratory-data-analysis-basics-part2/featured_hu54a580bf8140cbbc8f3a0868c76d4121_45350_800x0_resize_lanczos_2.png');"></div>
  
</div>


<div class="container-fluid split-header d-none d-xl-block">
  <div class="row">
    <div class="col-6">
      <div class="split-header-content">
        <h1 itemprop="name">exploratory data analysis: basics Python part 2</h1>

        
        <p class="page-subtitle">Python part 2</p>
        

        



<meta content="2020-01-25 00:00:00 &#43;0000 UTC" itemprop="datePublished">
<meta content="2020-01-25 00:00:00 &#43;0000 UTC" itemprop="dateModified">

<div class="article-metadata">

  
  
  
  
  <div>
    



  <span itemscope itemprop="author" itemtype="http://schema.org/Person">
      <span itemprop="name">
        

      
      
      
        <a href="/authors/admin/">Bruno Carlin</a></span></span>
  



  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    <time>Jan 25, 2020</time>
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    8 min read
  </span>
  

  
  
  <span class="middot-divider"></span>
  <a href="/2020/01/25/exploratory-data-analysis-basics-part2/#disqus_thread"></a>
  

  
  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder"></i>
    
    <a href="">R and Python</a>, 
    
    <a href="/categories/r-project/">r-project</a>
    
  </span>
  
  

  

</div>


        







  










        
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=exploratory%20data%20analysis%3a%20basics%20Python%20part%202&amp;url=%2f2020%2f01%2f25%2fexploratory-data-analysis-basics-part2%2f"
         target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2f2020%2f01%2f25%2fexploratory-data-analysis-basics-part2%2f"
         target="_blank" rel="noopener">
        <i class="fab fa-facebook-f"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2f2020%2f01%2f25%2fexploratory-data-analysis-basics-part2%2f&amp;title=exploratory%20data%20analysis%3a%20basics%20Python%20part%202"
         target="_blank" rel="noopener">
        <i class="fab fa-linkedin-in"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2f2020%2f01%2f25%2fexploratory-data-analysis-basics-part2%2f&amp;title=exploratory%20data%20analysis%3a%20basics%20Python%20part%202"
         target="_blank" rel="noopener">
        <i class="fab fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=exploratory%20data%20analysis%3a%20basics%20Python%20part%202&amp;body=%2f2020%2f01%2f25%2fexploratory-data-analysis-basics-part2%2f">
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


      </div>
    </div>
    <div class="col-6">
      <div class="split-header-image">
        <img src="/2020/01/25/exploratory-data-analysis-basics-part2/featured_hu54a580bf8140cbbc8f3a0868c76d4121_45350_680x500_fill_q90_lanczos_smart1_2.png" itemprop="image" alt="">
        
      </div>
    </div>
  </div>
</div>

<div class="article-container d-xl-none">
  <h1 itemprop="name">exploratory data analysis: basics Python part 2</h1>

  
  <p class="page-subtitle">Python part 2</p>
  

  



<meta content="2020-01-25 00:00:00 &#43;0000 UTC" itemprop="datePublished">
<meta content="2020-01-25 00:00:00 &#43;0000 UTC" itemprop="dateModified">

<div class="article-metadata">

  
  
  
  
  <div>
    



  <span itemscope itemprop="author" itemtype="http://schema.org/Person">
      <span itemprop="name">
        

      
      
      
        <a href="/authors/admin/">Bruno Carlin</a></span></span>
  



  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    <time>Jan 25, 2020</time>
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    8 min read
  </span>
  

  
  
  <span class="middot-divider"></span>
  <a href="/2020/01/25/exploratory-data-analysis-basics-part2/#disqus_thread"></a>
  

  
  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder"></i>
    
    <a href="">R and Python</a>, 
    
    <a href="/categories/r-project/">r-project</a>
    
  </span>
  
  

  
    
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=exploratory%20data%20analysis%3a%20basics%20Python%20part%202&amp;url=%2f2020%2f01%2f25%2fexploratory-data-analysis-basics-part2%2f"
         target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2f2020%2f01%2f25%2fexploratory-data-analysis-basics-part2%2f"
         target="_blank" rel="noopener">
        <i class="fab fa-facebook-f"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2f2020%2f01%2f25%2fexploratory-data-analysis-basics-part2%2f&amp;title=exploratory%20data%20analysis%3a%20basics%20Python%20part%202"
         target="_blank" rel="noopener">
        <i class="fab fa-linkedin-in"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2f2020%2f01%2f25%2fexploratory-data-analysis-basics-part2%2f&amp;title=exploratory%20data%20analysis%3a%20basics%20Python%20part%202"
         target="_blank" rel="noopener">
        <i class="fab fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=exploratory%20data%20analysis%3a%20basics%20Python%20part%202&amp;body=%2f2020%2f01%2f25%2fexploratory-data-analysis-basics-part2%2f">
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

  







  









</div>



  <div class="article-container">

    <div class="article-style" itemprop="articleBody">
      

<div id="TOC">
<ul>
<li><a href="#second-post">Second Post</a><ul>
<li><a href="#objectives">Objectives</a></li>
<li><a href="#define-the-variables-used-in-the-conclusion">Define the variables used in the conclusion</a></li>
<li><a href="#using-masks-or-other-methods-to-filter-the-data">Using masks or other methods to filter the data</a></li>
<li><a href="#visualizing-the-hypothesis">Visualizing the hypothesis</a></li>
<li><a href="#conclusion">Conclusion</a></li>
<li><a href="#before-we-start">Before we start</a><ul>
<li><a href="#reservations">Reservations</a></li>
<li><a href="#data-dictionary">Data Dictionary</a></li>
</ul></li>
</ul></li>
<li><a href="#python">Python</a><ul>
<li><a href="#importing-the-dataset-from-part-1">Importing the dataset from part 1</a></li>
</ul></li>
</ul>
</div>

<p>I am currently doing exercises from <a href="https://github.com/sn3fru/datascience_course">digital house brasil</a></p>
<p>Let’s see what version of python this env is running.</p>
<pre class="r"><code>reticulate::py_config()</code></pre>
<pre><code>## python:         /home/bruno-carlin/Documents/GIthub/TwoSidesData2/.venv/bin/python
## libpython:      /opt/python/3.7/lib/libpython3.7m.so
## pythonhome:     /opt/python/3.7:/opt/python/3.7
## virtualenv:     /home/bruno-carlin/Documents/GIthub/TwoSidesData2/.venv/bin/activate_this.py
## version:        3.7.4 (default, Aug 13 2019, 20:35:49)  [GCC 7.3.0]
## numpy:          /home/bruno-carlin/Documents/GIthub/TwoSidesData2/.venv/lib/python3.7/site-packages/numpy
## numpy_version:  1.18.1
## 
## NOTE: Python version was forced by use_python function</code></pre>
<pre class="python"><code>import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
import pandas as pd
import os</code></pre>
<div id="second-post" class="section level1">
<h1>Second Post</h1>
<div id="objectives" class="section level2">
<h2>Objectives</h2>
</div>
<div id="define-the-variables-used-in-the-conclusion" class="section level2">
<h2>Define the variables used in the conclusion</h2>
<p>In our case, we choose to use <a href="#python_hypothesis_testing">salary ~ sex,region</a> region was added to test whether <a href="https://en.wikipedia.org/wiki/Simpson%27s_paradox">Simpson’s paradox</a> was at play.</p>
</div>
<div id="using-masks-or-other-methods-to-filter-the-data" class="section level2">
<h2>Using masks or other methods to filter the data</h2>
<p>This objective was mostly done using the groupby function.</p>
</div>
<div id="visualizing-the-hypothesis" class="section level2">
<h2>Visualizing the hypothesis</h2>
<p><a href="#python_plot_histograms">We were advised to use two histograms combined to get a preview of our answer.</a></p>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>Comment on our findings.</p>
</div>
<div id="before-we-start" class="section level2">
<h2>Before we start</h2>
<div id="reservations" class="section level3">
<h3>Reservations</h3>
<p>This is an exercise where we were supposed to ask a relevant question using the data from the IBGE(Brazil’s main data collector) database of 1970.</p>
<p>Our group decided to ask whether women received less than man, we expanded the analysis hoping to avoid the Simpson’s paradox.</p>
<p>This is just an basic inference, and it’s results are therefore only used for studying purposes I don’t believe any finding would be relevant using just this approach but some basic operations can be used in a more impact full work.</p>
</div>
<div id="data-dictionary" class="section level3">
<h3>Data Dictionary</h3>
<p>We got a Data Dictionary that will be very useful for our Analysis, it contains all the required information about the encoding of the columns and the intended format that the folks at STATA desired.</p>
<details>
<summary>Portuguese</summary>
<p>
<p>Descrição do Registro de Indivíduos nos EUA.</p>
<p>Dataset do software STATA (pago), vamos abri-lo com o pandas e transforma-lo em DataFrame.</p>
<p>Variável 1 – CHAVE DO INDIVÍDUO ? Formato N - Numérico ? Tamanho 11 dígitos (11 bytes) ? Descrição Sumária Identifica unicamente o indivíduo na amostra.</p>
<p>Variável 2 - IDADE CALCULADA EM ANOS ? Formato N - Numérico ? Tamanho 3 dígitos (3 bytes) ? Descrição Sumária Identifica a idade do morador em anos completos.</p>
<p>Variável 3 – SEXO ? Formato N - Numérico ? Tamanho 1 dígito (1 byte) ? Quantidade de Categorias 3 ? Descrição Sumária Identifica o sexo do morador. Categorias (1) homem, (2) mulher e (3) gestante.</p>
<p>Variável 4 – ANOS DE ESTUDO ? Formato N - Numérico ? Tamanho 2 dígitos (2 bytes) ? Quantidade de Categorias 11 ? Descrição Sumária Identifica o número de anos de estudo do morador. Categorias (05) Cinco ou menos, (06) Seis, (07) Sete, (08) Oito, (09) Nove, (10) Dez, (11) Onze, (12) Doze, (13) Treze, (14) Quatorze, (15) Quinze ou mais.</p>
<p>Variável 5 – COR OU RAÇA ? Formato N - Numérico ? Tamanho 2 dígitos (2 bytes) ? Quantidade de Categorias 6 ? Descrição Sumária Identifica a Cor ou Raça declarada pelo morador. Categorias (01) Branca, (02) Preta, (03) Amarela, (04) Parda, (05) Indígena e (09) Não Sabe.</p>
<p>Variável 6 – VALOR DO SALÁRIO (ANUALIZADO) ? Formato N - Numérico ? Tamanho 8 dígitos (8 bytes) ? Quantidade de Decimais 2 ? Descrição Sumária Identifica o valor resultante do salário anual do indivíduo. Categorias especiais (-1) indivíduo ausente na data da pesquisa e (999999) indivíduo não quis responder.</p>
<p>Variável 7 – ESTADO CIVIL ? Formato N - Numérico ? Tamanho 1 dígito (1 byte) ? Quantidade de Categorias 2 ? Descrição Sumária Dummy que identifica o estado civil declarado pelo morador. Categorias (1) Casado, (0) não casado.</p>
<p>Variável 8 – REGIÃO GEOGRÁFICA ? Formato N - Numérico ? Tamanho 1 dígito (1 byte) ? Quantidade de Categorias 5 ? Descrição Sumária Identifica a região geográfica do morador. Categorias (1) Norte, (2) Nordeste, (3) Sudeste, (4) Sul e (5) Centro-oeste.</p>
</p>
</details>
<details>
<summary>English</summary>
<p>
<p>Description of the US Individual Registry.</p>
<p>Dataset of the STATA software (paid), we will open it with pandas and turn it into DataFrame.</p>
<p>Variable 1 - KEY OF THE INDIVIDUAL? Format N - Numeric? Size 11 digits (11 bytes)? Summary Description Uniquely identifies the individual in the sample.</p>
<p>Variable 2 - AGE CALCULATED IN YEARS? Format N - Numeric? Size 3 digits (3 bytes)? Summary Description Identifies the age of the resident in full years.</p>
<p>Variable 3 - SEX? Format N - Numeric? Size 1 digit (1 byte)? Number of Categories 3? Summary Description Identifies the gender of the resident. Categories (1) men, (2) women and (3) pregnant women.</p>
<p>Variable 4 - YEARS OF STUDY? Format N - Numeric? Size 2 digits (2 bytes)? Number of Categories 11? Summary Description Identifies the number of years of study of the resident. Categories (05) Five or less, (06) Six, (07) Seven, (08) Eight, (09) Nine, (10) Dec, (11) Eleven, (12) Twelve, (13) Thirteen, (14 ) Fourteen, (15) Fifteen or more.</p>
<p>Variable 5 - COLOR OR RACE? Format N - Numeric? Size 2 digits (2 bytes)? Number of Categories 6? Summary Description Identifies the Color or Race declared by the resident. Categories (01) White, (02) Black, (03) Yellow, (04) Brown, (05) Indigenous and (09) Don’t know.</p>
<p>Variable 6 - WAGE VALUE (ANNUALIZED)? Format N - Numeric? Size 8 digits (8 bytes)? Number of decimals 2? Summary Description Identifies the amount resulting from the individual’s annual salary. Special categories (-1) individual absent on the survey date and (999999) individual did not want to answer.</p>
<p>Variable 7 - CIVIL STATE? Format N - Numeric? Size 1 digit (1 byte)? Number of Categories 2? Summary Description Dummy that identifies the marital status declared by the resident. Categories (1) Married, (0) Not married.</p>
<p>Variable 8 - GEOGRAPHICAL REGION? Format N - Numeric? Size 1 digit (1 byte)? Number of Categories 5? Summary Description Identifies the resident’s geographic region. Categories (1) North, (2) Northeast, (3) Southeast, (4) South and (5) Midwest.</p>
</p>
</details>
</div>
</div>
</div>
<div id="python" class="section level1">
<h1>Python</h1>
<div id="importing-the-dataset-from-part-1" class="section level2">
<h2>Importing the dataset from part 1</h2>
<pre class="python"><code>df_sex_thesis =pd.read_feather(r.file_path_linux + &#39;/sex_thesis_assignment.feather&#39;)</code></pre>
<pre class="python"><code>df_sex_thesis.info()</code></pre>
<pre><code>## &lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
## RangeIndex: 65795 entries, 0 to 65794
## Data columns (total 8 columns):
## index           65795 non-null int64
## age             65795 non-null int64
## sex             65795 non-null object
## years_study     65795 non-null category
## color_race      65795 non-null object
## salary          65795 non-null float64
## civil_status    65795 non-null object
## region          65795 non-null object
## dtypes: category(1), float64(1), int64(2), object(4)
## memory usage: 3.6+ MB</code></pre>
<p>Let’s get going first we need to define which variables we will add to the hypothesis to isolate the factor of salary ~ sex, a simple way of doing that is that if we consider that our sample of individuals is random in nature we could simple compare the means of the individuals given their sex and see if there is a significant difference in their means, we can calculate that by using the standard deviation of the calculated means.</p>
<p>A good graphic to get an idea if these effects would be significant was the bar plots we used in part 1.</p>
<p>But if we are working with Categorical variable we can use a groupby aproach to glimpse at the difference in means</p>
<pre class="python"><code>df_sex_thesis.groupby(&#39;sex&#39;).mean().salary</code></pre>
<pre><code>## sex
## man      14302.491879
## woman    10642.502734
## Name: salary, dtype: float64</code></pre>
<details>
<summary>Group by explanation</summary>
<p>
<p>Group by in pandas is a method that accepts a list of elements in this case just ‘sex’ and applies consequent operation in each group, in this case we applied the mean method from a pandas DataFrame, we used .salary to return just the mean for the salary variable.</p>
</p>
</details>
<pre class="python"><code>df_sex_thesis.groupby([&#39;sex&#39;,&#39;region&#39;]).mean().salary</code></pre>
<pre><code>## sex    region   
## man    midwest      15263.832776
##        north        11645.335382
##        south        15507.600528
##        southeast    14755.538089
## woman  midwest      11394.125688
##        north         9932.078329
##        northeast    24737.436554
##        south        10159.399214
##        southeast    10826.777483
## Name: salary, dtype: float64</code></pre>
<p>Adding standard deviations</p>
<pre class="python"><code>df_sex_thesis.groupby([&#39;sex&#39;]).std().salary</code></pre>
<pre><code>## sex
## man      21832.256493
## woman    11949.880892
## Name: salary, dtype: float64</code></pre>
<p>These are really big Standard deviations! Remembering from stats that +2 SD’s gives about a 95% confidence interval we are not even close.</p>
<p>To add both togheter we can use pandas agg method</p>
<pre class="python"><code>df_sex_thesis.groupby([&#39;sex&#39;]).agg([&#39;mean&#39;,&#39;std&#39;]).salary</code></pre>
<pre><code>##                mean           std
## sex                              
## man    14302.491879  21832.256493
## woman  10642.502734  11949.880892</code></pre>
<p>Now we can calculate boundaries</p>
<pre class="python"><code>df_agg =df_sex_thesis.groupby([&#39;sex&#39;]).agg([&#39;mean&#39;,&#39;std&#39;]).salary</code></pre>
<pre class="python"><code>df_agg</code></pre>
<pre><code>##                mean           std
## sex                              
## man    14302.491879  21832.256493
## woman  10642.502734  11949.880892</code></pre>
<pre class="python"><code>df_agg[&#39;lower_bound&#39;] = df_agg[&#39;mean&#39;] - df_agg[&#39;std&#39;] * 2
df_agg[&#39;upper_bound&#39;] = df_agg[&#39;mean&#39;] + df_agg[&#39;std&#39;] * 2</code></pre>
<pre class="python"><code>df_agg</code></pre>
<pre><code>##                mean           std   lower_bound   upper_bound
## sex                                                          
## man    14302.491879  21832.256493 -29362.021106  57967.004865
## woman  10642.502734  11949.880892 -13257.259050  34542.264519</code></pre>
<p>Cool but to verbose to be repeated we can easily make this series of operation into a function</p>
<pre class="python"><code>def groupby_bound(df,groupby_variables,value_variables):
  df_agg =  df.groupby(groupby_variables).agg([&#39;mean&#39;,&#39;std&#39;])[value_variables]
  df_agg[&#39;lower_bound&#39;] = df_agg[&#39;mean&#39;] - df_agg[&#39;std&#39;] * 2
  df_agg[&#39;upper_bound&#39;] = df_agg[&#39;mean&#39;] + df_agg[&#39;std&#39;] * 2
  return df_agg</code></pre>
<pre class="python"><code>groupby_bound(df=df_sex_thesis,groupby_variables=&#39;sex&#39;,value_variables=&#39;salary&#39;)</code></pre>
<pre><code>##                mean           std   lower_bound   upper_bound
## sex                                                          
## man    14302.491879  21832.256493 -29362.021106  57967.004865
## woman  10642.502734  11949.880892 -13257.259050  34542.264519</code></pre>
<p>Now that we have a working function let’s see if we can find a difference in salary on some strata of the population</p>
<pre class="python"><code>groupby_bound(df=df_sex_thesis,groupby_variables=[&#39;sex&#39;,&#39;region&#39;],value_variables=&#39;salary&#39;)</code></pre>
<pre><code>##                          mean           std   lower_bound   upper_bound
## sex   region                                                           
## man   midwest    15263.832776  22365.162600 -29466.492424  59994.157975
##       north      11645.335382  17755.179348 -23865.023315  47155.694079
##       south      15507.600528  24077.013334 -32646.426140  63661.627196
##       southeast  14755.538089  22471.956377 -30188.374664  59699.450842
## woman midwest    11394.125688  14039.268041 -16684.410394  39472.661770
##       north       9932.078329  10366.150119 -10800.221908  30664.378567
##       northeast  24737.436554  35861.738868 -46986.041182  96460.914290
##       south      10159.399214  10274.792359 -10390.185505  30708.983932
##       southeast  10826.777483  12140.616504 -13454.455526  35108.010491</code></pre>
</div>
</div>

    </div>

    


<div class="article-tags">
  
  <a class="badge badge-light" href="">R Markdown</a>
  
  <a class="badge badge-light" href="/tags/reticulate/">reticulate</a>
  
  <a class="badge badge-light" href="/tags/pandas/">pandas</a>
  
</div>




    
      






  
  
    
  
  







<div class="media author-card" itemscope itemtype="http://schema.org/Person">
  
  
  <img class="portrait mr-3" src="/author/admin/avatar_hud572cb50654477d7dfb45121741e5f89_141766_250x250_fill_q90_lanczos_center.jpg" itemprop="image" alt="Avatar">
  

  <div class="media-body">
    <h5 class="card-title" itemprop="name"><a href="/authors/admin">Bruno Carlin</a></h5>
    <h6 class="card-subtitle">Student</h6>
    <p class="card-text" itemprop="description">Data Science learner</p>
    <ul class="network-icon" aria-hidden="true">
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="/#contact" >
          <i class="fas fa-envelope"></i>
        </a>
      </li>
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="https://twitter.com/brunotestaguzza" target="_blank" rel="noopener">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
      
      
      
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="https://scholar.google.com.br/scholar?hl=pt-BR&amp;as_sdt=0%2C5&amp;q=bruno&#43;testaguzza&#43;carlin&#43;&amp;btnG=" target="_blank" rel="noopener">
          <i class="ai ai-google-scholar"></i>
        </a>
      </li>
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="https://github.com/brunocarlin" target="_blank" rel="noopener">
          <i class="fab fa-github"></i>
        </a>
      </li>
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="https://www.linkedin.com/in/bruno-carlin-451007172/" target="_blank" rel="noopener">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
      
    </ul>
  </div>
</div>



      
      
      <div class="article-widget">
        <div class="hr-light"></div>
        <h3>Related</h3>
        <ul>
          
          <li><a href="/2020/01/19/exploratory-data-analysis-basics-part1/">exploratory data analysis: basics Python part 1</a></li>
          
          <li><a href="/2020/01/19/exploratory-data-analysis-basics-part1/">exploratory data analysis: basics Python part 1</a></li>
          
          <li><a href="/2019/04/05/exploratory-data-analysis-basic-statistical-inference/">exploratory data analysis: basic statistical inference</a></li>
          
          <li><a href="/2019/03/23/exploratory-data-analysis-basic-pandas-and-dplyr/">exploratory data analysis: basic pandas and dplyr</a></li>
          
        </ul>
      </div>
      
    

    
    <div class="article-widget">
      <div class="post-nav">
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Previous</div>
    <a href="/2020/01/19/exploratory-data-analysis-basics-part1/" rel="prev">exploratory data analysis: basics Python part 1</a>
  </div>
  
</div>

    </div>
    

    
<section id="comments">
  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "twosidesdata" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



  </div>
</article>

<div class="container">
  <footer class="site-footer">
  
  <p class="powered-by">
    <a href="/privacy/">Privacy Policy</a>
  </p>
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

</div>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha512-+NqPlbbtM1QqiK8ZAo4Yrj2c4lNQoGv8P79DPtKzj++l5jnN39rHA/xsqn8zE9l0uSoxaCdrOgFs6yjyfbBxSg==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha256-VsEqElsCHSGmnmHXGQzvoWjWwoznFSZc6hs7ARLRacQ=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/sql.min.js"></script>
        
      

      
      
    

    
    

    
    
    
    <script id="dsq-count-scr" src="//twosidesdata.disqus.com/count.js" async></script>
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.1846cc5c27f3006b56814095ec02281f.js"></script>

  </body>
</html>

